<div id="container">
    <mat-card appearance="outlined" id="login-card">
        <mat-card-header>
            <mat-card-title>
                Login
            </mat-card-title>
        </mat-card-header>
        <mat-card-content>
            <mat-form-field style="width: 100%;">
                <mat-label>Email</mat-label>
                <input [(ngModel)]="email"
                        (ngModelChange)="resetFlags()"
                        (keyup.enter)="searchUser(input.valid)"
                        pattern="^[a-zA-Z0-9._%+\-]+@[a-zA-Z0-9.\-]+\.[a-zA-Z]{2,}$"
                        #input="ngModel"
                        id="email"
                        name="email"
                        required
                        autofocus
                        matInput>
                <button (click)="searchUser(input.valid)"
                        matTooltip="Search email"
                        matIconButton
                        matSuffix>
                    <mat-icon>search</mat-icon>
                </button>
                @if (newUser()) {
                    <mat-hint>No user profile found for this email, create one?</mat-hint>
                }
                @if (input.invalid) {
                    <mat-error>Invalid email address</mat-error>
                }
            </mat-form-field>
        </mat-card-content>
        <mat-card-actions [align]="'end'">
            @if (newUser()) 
            {
                <button (click)="createUserProfile()" matButton matTooltip="Create profile for {{email}}">Create</button>
            }        
        </mat-card-actions>
    </mat-card>
</div>